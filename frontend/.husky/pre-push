#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

GIT_DIFFS=$(git diff --cached --name-only | grep "frontend")

if [ -z GIT_DIFFS ]; then
  exit 0
fi

echo 'ğŸ›ğŸ›ğŸ›ğŸ›... Before push, Trying to build now. ğŸ›ğŸ›ğŸ›ğŸ›'

cd frontend

npm run build ||
(
    echo 'âŒğŸ‘·ğŸ”¨âŒ Better call Bob... Because your build failed âŒğŸ‘·ğŸ”¨âŒ
            Next build failed: View the errors above to see why.
    '
    false;
)

echo 'âœ…âœ…âœ…âœ… You win this time... I am pushing this now. âœ…âœ…âœ…âœ…'